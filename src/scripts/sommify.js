!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Sommify={})}(this,(function(e){"use strict";const t="https://elements.sommify.ai";const i=e=>{e.origin===t&&console.log(e.data)};var o="EXIT",s="ADD_TO_CART",n="FOCUS",c="BLUR",a="UPDATE_PARAMS",l="WINES_UPDATED",r="COOKIES",d={en:{title:"Hi! 👋 Need help choosing the right wine?",subtitle:"Let our AI sommelier help you!",response:"Yes, please! 🍷",mobile:"Tap for our AI sommelier's help!"},it:{title:"Ciao! 👋 Hai bisogno di aiuto per scegliere il vino giusto?",subtitle:"Lascia che il nostro sommelier AI ti aiuti!",response:"Sì, per favore! 🍷",mobile:"Tocca per l'aiuto del nostro sommelier AI!"},fr:{title:"Salut! 👋 Besoin d'aide pour choisir le bon vin?",subtitle:"Laissez notre sommelier AI vous aider!",response:"Oui s'il vous plaît! 🍷",mobile:"Appuyez pour l'aide de notre sommelier AI!"},es:{title:"¡Hola! 👋 ¿Necesitas ayuda para elegir el vino adecuado?",subtitle:"¡Deja que nuestro sumiller AI te ayude!",response:"¡Sí por favor! 🍷",mobile:"¡Toque para la ayuda de nuestro sumiller AI!"},de:{title:"Hallo! 👋 Brauchen Sie Hilfe bei der Auswahl des richtigen Weins?",subtitle:"Lassen Sie sich von unserem AI Sommelier helfen!",response:"Ja, bitte! 🍷",mobile:"Tippen Sie für die Hilfe unseres AI Sommeliers!"},"pt-pt":{title:"Oi! 👋 Precisa de ajuda para escolher o vinho certo?",subtitle:"Deixe que o nosso sommelier AI o ajude!",response:"Sim por favor! 🍷",mobile:"Toque para a ajuda do nosso sommelier AI!"},ja:{title:"こんにちは！ 👋 適切なワインを選ぶのに役立ちますか？",subtitle:"AIソムリエにお任せください！",response:"はい、お願いします！ 🍷",mobile:"AIソムリエの助けを求めるにはタップしてください！"},zh:{title:"你好！ 👋 需要帮助选择合适的葡萄酒吗？",subtitle:"让我们的AI侍酒师帮助您！",response:"是的，请！ 🍷",mobile:"点击寻求我们的AI侍酒师的帮助！"},ko:{title:"안녕! 👋 적절한 와인을 선택하는 데 도움이 필요하십니까?",subtitle:"AI 소믈리에가 도와 드리겠습니다!",response:"네, 부탁해! 🍷",mobile:"AI 소믈리에의 도움을 받으려면 탭하세요!"},ru:{title:"Привет! 👋 Нужна помощь в выборе правильного вина?",subtitle:"Позвольте нашему AI сомелье вам помочь!",response:"Да, пожалуйста! 🍷",mobile:"Нажмите, чтобы получить помощь нашего AI сомелье!"},nl:{title:"Hallo! 👋 Heeft u hulp nodig bij het kiezen van de juiste wijn?",subtitle:"Laat onze AI-sommelier u helpen!",response:"Ja, alsjeblieft! 🍷",mobile:"Tik voor de hulp van onze AI-sommelier!"},et:{title:"Tere! 👋 Vajate abi õige veini valimisel?",subtitle:"Laske meie AI sommelieril teid aidata!",response:"Jah, palun! 🍷",mobile:"Puudutage meie AI sommelieri abi!"},fi:{title:"Hei! 👋 Tarvitsetko apua oikean viinin valitsemiseen?",subtitle:"Anna AI sommelierimme auttaa sinua!",response:"Kyllä kiitos! 🍷",mobile:"Napauta AI sommelierimme apua!"},sk:{title:"Ahoj! 👋 Potrebujete pomôcť pri výbere správneho vína?",subtitle:"Nechajte nášho AI sommeliéra, aby vám pomohol!",response:"Áno, prosím! 🍷",mobile:"Ťuknutím získate pomoc našeho AI sommeliéra!"},cs:{title:"Ahoj! 👋 Potřebujete pomoc při výběru správného vína?",subtitle:"Nechte našeho AI sommeliéra, aby vám pomohl!",response:"Ano prosím! 🍷",mobile:"Klepnutím získáte pomoc našeho AI sommeliéra!"}};let p=!1;function m(e){p=e}let h=!1;function u(e,t){const i=document.createElement("div");return Object.assign(i.style,t),i.id=e,i}const g=(e,{widgetWidth:t,widgetHeight:i,widgetPosition:o,widgetOffsetX:s,widgetOffsetY:n,fullscreen:c,disableScroll:a,zIndex:l,hide:r})=>{let d={top:"unset",left:"unset",right:"unset",bottom:"unset"};if("center"===o)d={...d,top:"50%",left:"50%",transform:"translate(-50%, -50%)"};else{const e=o.includes("top")?"top":"bottom",t=o.includes("left")?"left":"right";d={...d,[t]:`calc(15px + ${s}px)`,[e]:`calc(15px + ${n}px)`}}d=c?{top:0,left:0,right:"unset",bottom:"unset"}:d;const p=e=>{e.preventDefault()};e&&(c||a)?(document.body.classList.add("sommify__scroll-blocked"),document.body.addEventListener("touchmove",p,{passive:!1})):(document.body.classList.remove("sommify__scroll-blocked"),document.body.removeEventListener("touchmove",p,{passive:!1}));const m=(()=>{const e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)&&/safari/.test(e)})();let h=i;c&&window.visualViewport?h=window.visualViewport.height+"px":c&&(h=window.innerHeight+"px");let u=c?"100vw":t;if(m&&c){console.log("[iOS detected]");let e=null;document.documentElement&&"getBoundingClientRect"in document.documentElement?e=document.documentElement.getBoundingClientRect():"getBoundingClientRect"in document.body&&(e=document.body.getBoundingClientRect()),e&&(u=e.width+"px"),u=window.innerWidth+"px",h=window.visualViewport.height+"px"}return{position:"fixed",width:u,height:h,maxWidth:c?"none":"calc( 100vw - 15*2px )",maxHeight:c?"none":"calc( 100vh - 15*2px )",scale:e?1:.85,opacity:e?1:0,display:r?"none":"block",pointerEvents:e?"all":"none",transitionProperty:"opacity, scale",transitionDuration:"0.15s",transitionTimingFunction:"ease-in-out",transformOrigin:o.replace("-"," "),zIndex:l,...d}},f=(e,{triggerRadius:t,triggerPosition:i,triggerOffsetX:o,triggerOffsetY:s,triggerBackground:n,zIndex:c,hide:a})=>{const l=i.includes("top")?"top":"bottom";return{borderRadius:"50%",display:"flex",background:n,justifyContent:"center",alignItems:"center",userSelect:"none",cursor:"pointer",width:`${t}px`,height:`${t}px`,position:"fixed",scale:e?1.09:1,opacity:e?0:1,visibility:a||e?"hidden":"visible",transition:"all 0.15s ease-in-out",cursor:"pointer",zIndex:c,...{top:"unset",left:"unset",right:"unset",bottom:"unset",[i.includes("left")?"left":"right"]:o+"px",[l]:s+"px"}}};e.createEmbedded=function(e="interactive"){return{mount:(e,{width:o="420px",height:s="420px",...n})=>{var c=document.getElementById(e);if(c){const e=document.createElement("iframe"),a=function(e){const t=new URLSearchParams;for(const i in e)t.append(i,JSON.stringify(e[i]));return t.toString()}(n);e.src=t+"/interactive?"+a,e.height=s,e.width=o,e.style.border="none",c.appendChild(e),window.addEventListener("message",i)}else console.error(`Element with ID '${e}' not found.`)},unmount:e=>{var t=document.getElementById(e);t&&(t.innerHTML=""),window.removeEventListener("message",i)}}},e.createWidget=function({apiKey:e,localization:t="en",currency:i="EUR",position:y="bottom-right",triggerRadius:b=70,triggerPosition:w,triggerOffsetX:v=0,triggerOffsetY:k=0,triggerIcon:x="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8' standalone='no'%3f%3e%3c!-- Created with Inkscape (http://www.inkscape.org/) --%3e%3csvg width='67.690643mm' height='81.385841mm' viewBox='0 0 67.690643 81.385841' version='1.1' id='svg738' inkscape:export-filename='sm_circled_face_happy.svg' inkscape:export-xdpi='96' inkscape:export-ydpi='96' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3e %3csodipodi:namedview id='namedview740' pagecolor='white' bordercolor='black' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' inkscape:document-units='mm' showgrid='false' /%3e %3cdefs id='defs735' /%3e %3cg inkscape:label='Layer 1' inkscape:groupmode='layer' id='layer1' transform='translate(-71.799516%2c-84.600851)'%3e %3ccircle style='fill:%23fbe0ec%3bfill-opacity:1%3bstroke:none%3bstroke-width:0.644635' id='path3312' cx='105.64484' cy='126.90308' inkscape:label='path3312' r='33.845322' inkscape:export-filename='sm_circled_face_happy.svg' inkscape:export-xdpi='96' inkscape:export-ydpi='96' /%3e %3cpath fill='%231f2937' d='m 124.50231%2c106.50433 c 0%2c0 6.5703%2c15.94019 2.46218%2c23.32273 -4.10891%2c7.39365 -8.78315%2c12.0782 -8.78315%2c12.0782 0%2c-3.03779 0.89483%2c-10.26631 0.89483%2c-15.19779 0%2c-4.92196 -3.28395%2c-5.91128 -5.91048%2c-3.28554 -2.62494%2c2.62573 -3.1196%2c7.06415 -3.1196%2c7.06415 0%2c0 -2.95444%2c-0.82417 -4.93148%2c-6.40514 -1.96752%2c-5.58098 -15.1073%2c-9.52474 -18.061747%2c3.28475 l -2.790091%2c2.29622 c -1.566547%2c-1.55463 -7.559603%2c-10.83323 -2.306546%2c-18.5556 5.260994%2c-7.72317 14.785727%2c-16.259383 27.759564%2c-12.973841 0%2c0 -0.71935%2c-5.426146 3.61426%2c-6.899002 3.43957%2c-1.174313 9.52553%2c-1.647534 13.30414%2c2.131872 5.65243%2c5.662754 1.52367%2c10.801471 -2.13188%2c13.138991 z' id='path213' style='stroke-width:0.793992' /%3e %3cpath fill='%23a41d5e' d='m 118.18134%2c141.90526 0.72968%2c11.90434 c 0%2c0 -21.01619%2c13.96237 -21.01619%2c11.98533 0%2c-4.95214 -0.492274%2c-11.98533 -0.492274%2c-11.98533 -3.976316%2c0.19536 -11.030145%2c-0.3295 -9.184906%2c-13.16043 -2.306549%2c-1.15286 -4.284384%2c-3.09974 -4.284384%2c-3.09974 0%2c0 3.119597%2c-8.05187 3.119597%2c-10.18374 2.954447%2c-12.80949 16.095027%2c-8.86652 18.061747%2c-3.28475 1.97704%2c5.58097 4.93148%2c6.40514 4.93148%2c6.40514 0%2c0 0.49466%2c-4.43842 3.1196%2c-7.06415 2.62732%2c-2.62574 5.91048%2c-1.63722 5.91048%2c3.28554 0%2c4.9307 -0.89483%2c12.16 -0.89483%2c15.19779 z' id='path215' style='stroke-width:0.793992' /%3e %3crect style='display:none%3bfill:%231f2937%3bfill-opacity:1%3bstroke:none%3bstroke-width:0.702536' id='rect978-6' width='4.5632801' height='1.5171214' x='11.843478' y='153.12173' ry='0' rx='0' transform='rotate(-29.741601)' /%3e %3cpath fill='%231f2937' d='m 99.473539%2c130.74894 c 0%2c-0.77176 -0.555002%2c-1.39981 -1.235454%2c-1.39981 -0.678864%2c0 -1.236245%2c0.62805 -1.236245%2c1.39981 0%2c0.77257 0.556589%2c1.4006 1.236245%2c1.4006 0.680452%2c-7.8e-4 1.235454%2c-0.62885 1.235454%2c-1.4006 z' id='path217' style='stroke-width:0.793992' /%3e %3cg id='g227' transform='matrix(0.79399255%2c0%2c0%2c0.79399255%2c-411.5556%2c13.612756)' style='display:none'%3e %3cline fill='none' stroke='%231f2937' stroke-width='2' x1='639.52032' y1='140.01994' x2='645.96429' y2='142.09769' id='line223' /%3e %3c/g%3e %3cg id='g227-0' transform='matrix(0.75421913%2c-0.24814848%2c0.24814848%2c0.75421913%2c-421.33304%2c178.99485)'%3e %3cline fill='none' stroke='%231f2937' stroke-width='2' x1='639.47241' y1='140.18233' x2='646.01221' y2='141.9353' id='line223-0' /%3e %3c/g%3e %3cline fill='none' stroke='%23e7e2e1' stroke-width='1.58799' stroke-linecap='round' stroke-linejoin='round' x1='114.36301' y1='134.67915' x2='114.15817' y2='137.74236' id='line229' /%3e %3cpath fill='none' stroke='%231f2937' stroke-width='2.38198' d='m 120.24493%2c99.191655 c 6.38846%2c-5.823936 16.64129%2c-5.50872 16.64129%2c-5.50872' id='path241' /%3e %3cpath fill='none' stroke='%231f2937' stroke-width='2.38198' d='m 117.49692%2c85.080819 c 1.50303%2c3.413375 1.77378%2c7.782716 0.95517%2c11.059522' id='path243' /%3e %3cpath fill='%231f2937' d='m 89.927499%2c130.54135 c 0%2c-0.77176 -0.555002%2c-1.39981 -1.235454%2c-1.39981 -0.678864%2c0 -1.236245%2c0.62805 -1.236245%2c1.39981 0%2c0.77257 0.556589%2c1.4006 1.236245%2c1.4006 0.680452%2c-7.8e-4 1.235454%2c-0.62885 1.235454%2c-1.4006 z' id='path217-7' style='stroke-width:0.793992' /%3e %3crect style='fill:%231f2937%3bfill-opacity:1%3bstroke:none%3bstroke-width:0.702536' id='rect978' width='4.5632801' height='1.5171214' x='89.601776' y='123.79742' ry='0.66174883' rx='0' transform='rotate(1.7063832)' /%3e %3cpath style='display:none%3bfill:%231f2937%3bfill-opacity:1%3bstroke:none%3bstroke-width:0.796634' d='m 104.02591%2c141.03438 c 0%2c0 -8.046899%2c2.43916 -11.24781%2c5.52175 -0.02093%2c0.0202 1.215206%2c-10.33527 11.24781%2c-5.52175 z' id='path3258' sodipodi:nodetypes='csc' /%3e %3cpath style='fill:%231f2937%3bfill-opacity:1%3bstroke:none%3bstroke-width:0.796634' d='m 92.646198%2c144.8927 c 0%2c0 8.209902%2c-1.81653 11.637212%2c-4.64526 0.0224%2c-0.0185 -2.00215%2c10.21204 -11.637212%2c4.64526 z' id='path3258-7' sodipodi:nodetypes='csc' /%3e %3c/g%3e%3c/svg%3e",triggerBackground:_="transparent",widgetPosition:I,widgetOffsetX:A=0,widgetOffsetY:E=0,hideMobile:L=!1,widgetWidth:O="450px",widgetHeight:j="650px",fullscreen:S=!1,zIndex:T=999999,hide:z=!1,blockerVisible:C=!1,blockerOpacity:B=.2,disableScroll:W=!1,chatBubble:P=!0,chatBubbleDelay:D=3e3,chatBubbleTitle:H,chatBubbleSubtitle:R,chatBubbleResponse:$,mobile:M={triggerRadius:50,fullscreen:!0},...K}){const N={apiKey:e,triggerRadius:b,triggerPosition:w=w||y,triggerOffsetX:v+=23,triggerOffsetY:k+=23,triggerBackground:_,widgetPosition:I=I||y,widgetOffsetX:A,widgetOffsetY:E,hideMobile:L,widgetWidth:O,widgetHeight:j,hide:z,fullscreen:S,disableScroll:W,zIndex:T,blockerVisible:C,blockerOpacity:B,...K};let U=window.innerWidth<768;const V=d[t];var X=u("sommify-container",{});const Y=u("sommify-chat-bot-trigger",{...f(p,U?{...N,...M}:N),visibility:"hidden",opacity:0,scale:.7});Y.addEventListener("mouseenter",(()=>{Y.style.scale=1.1})),Y.addEventListener("mouseleave",(()=>{Y.style.scale=1}));const q=w.includes("left")?"left":"right",F=w.includes("top")?"top":"bottom",J=u("sommify-popup-chat",{});J.className=`sommify__popup-box sommify__${q}-align`,J.style[F]=b+3*k+"px",J.style[q]="23px",J.style.maxWidth=`calc( 100vw - ${2*v}px )`;const G=()=>{J.style[F]=b+k*(U?1.5:2.25)+"px"};G(),J.innerHTML=`\n    <div class="sommify__vignette"></div>\n\n    <div class="sommify__bubble sommify__shaded">\n      <div class="sommify__close sommify__display-on-hover">\n        <img src="data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8' standalone='no'%3f%3e%3c!-- Created with Inkscape (http://www.inkscape.org/) --%3e%3csvg width='72.281631mm' height='72.281639mm' viewBox='0 0 72.281631 72.281639' version='1.1' id='svg5' inkscape:export-filename='x.svg' inkscape:export-xdpi='96' inkscape:export-ydpi='96' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg'%3e %3csodipodi:namedview id='namedview7' pagecolor='white' bordercolor='black' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' inkscape:document-units='mm' showgrid='false' /%3e %3cdefs id='defs2' /%3e %3cg inkscape:label='Layer 1' inkscape:groupmode='layer' id='layer1'%3e %3crect style='fill:black%3bstroke-width:0.68' id='rect288' width='96.279869' height='12.238898' x='2.9708989' y='-6.1194491' ry='5.3867416' transform='rotate(45)' inkscape:export-filename='x.svg' inkscape:export-xdpi='96' inkscape:export-ydpi='96' /%3e %3crect style='fill:black%3bstroke-width:0.68' id='rect288-4' width='96.279869' height='12.238898' x='-48.139935' y='-57.230282' ry='5.3867416' transform='rotate(135)' inkscape:export-filename='x.svg' inkscape:export-xdpi='96' inkscape:export-ydpi='96' /%3e %3c/g%3e%3c/svg%3e" width="8px"\n          style="filter: invert(100%) sepia(100%) saturate(2%) hue-rotate(197deg) brightness(104%) contrast(101%);" />\n      </div>\n      <span class="sommify__mobile-hide" style="font-weight: 400">${H||V.title}</span>\n      <span class="sommify__mobile-hide" style="color: #acb0bd; font-weight: 300">\n      ${R||V.subtitle}\n      </span>\n      <span class="sommify__mobile-show" style="font-weight: 400">${V.mobile}</span>\n    </div>\n\n    <div class="sommify__response sommify__mobile-hide">\n      ${$||V.response}\n    </div>\n  `;const Q=()=>{J.style.display="none"};J.querySelector(".sommify__close").addEventListener("click",(()=>{Q()})),J.querySelector(".sommify__response").addEventListener("click",(()=>{ce()}));const Z=u("sommify-chat-bot-widget",g(p,U?{...N,...M}:N)),ee=u("sommify-screen-blocker",{width:"100vw",height:"100vh",position:"fixed",background:C?"#000":"none",opacity:B,top:0,left:0,transitionProperty:"opacity, scale",transitionDuration:"0.25s",visibility:"hidden",zIndex:T-1}),te=function(e,t){const i=document.createElement("img");return i.src=e,Object.assign(i.style,t),i}(x,{width:"100%",height:"100%"}),ie=document.createElement("iframe");function oe(){Object.assign(Z.style,g(p,U?{...N,...M}:N))}function se(){Object.assign(Y.style,f(p,U?{...N,...M}:N))}function ne(){m(!1),oe(),se(),Object.assign(ee.style,{visibility:"hidden",opacity:0}),ie.contentWindow.postMessage({action:p?n:c},"*")}function ce(){m(!0),h=!0,Q(),oe(),se(),Object.assign(ee.style,{visibility:"visible",opacity:B}),ie.contentWindow.postMessage({action:p?n:c},"*")}function ae(){p?ne():ce()}ie.src=`https://elements.sommify.ai?type=chat&autofocus=false&apiKey=${e}&localization=${t}&currency=${i}`,ie.id="sommify-chat-bot-iframe",Object.assign(ie.style,{width:"100%",height:"100%",border:"none"});const le=()=>{U=window.innerWidth<768,U?X.classList.add("sommify__mobile"):X.classList.remove("sommify__mobile"),oe(),se(),G()};U?X.classList.add("sommify__mobile"):X.classList.remove("sommify__mobile"),Y.appendChild(te),Y.addEventListener("click",ae),Z.appendChild(ie),ee.addEventListener("click",(e=>{ae()})),window.addEventListener("resize",le),window.visualViewport.addEventListener("resize",le),X.appendChild(ee),X.appendChild(Y),X.appendChild(Z);let re=!1;return window.addEventListener("message",(e=>{e?.data?.action===o&&ae(),e?.data?.action===r&&(console.log("[COOKIES]",e.data.payload),e.data.payload&&(re=!0))})),(async e=>{var t="sommify-css";if(!document.getElementById(t)){var i=document.getElementsByTagName("head")[0],o=document.createElement("link");o.id=t,o.rel="stylesheet",o.type="text/css",o.href="https://elements.sommify.ai/css/v1",o.media="all",i.appendChild(o)}o.onload=e})((()=>{X.appendChild(J)})),{mount:(t=(()=>{}))=>{document.body.appendChild(X),ie.onload=()=>{Object.assign(Y.style,{visibility:"visible",opacity:1,scale:1}),setTimeout((()=>{h||re||!P||J.classList.add("sommify__show")}),D),ie.contentWindow?.postMessage({action:a,payload:{apiKey:e,...K}},"*"),t()}},unmout:()=>{document.body.removeChild(X)},setApiKey:e=>{ie.contentWindow?.postMessage({action:a,payload:{apiKey:e}},"*")},onAddToCart:(e=(()=>{}))=>{window.addEventListener("message",(t=>{t?.data?.action===s&&e(t.data.payload)}))},onWinesUpdated:(e=(()=>{}))=>{window.addEventListener("message",(t=>{t?.data?.action===l&&e(t.data.payload)}))},updateParams:e=>{ie.contentWindow?ie.contentWindow.postMessage({action:a,payload:e},"*"):ie.addEventListener("load",(()=>{ie.contentWindow?.postMessage({action:a,payload:e},"*")}))},close:ne,open:ce,toggle:ae}},Object.defineProperty(e,"__esModule",{value:!0})}));
